/*! Develop by 1kg */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=1)}([,function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){var t={hasClass:function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},addClass:function(e,n){t.hasClass(e,n)||(e.className+=" "+n)},removeClass:function(e,n){if(t.hasClass(e,n)){var r=new RegExp("(\\s|^)"+n+"(\\s|$)");e.className=e.className.replace(r," ")}},isPrimitive:function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e},getValueBy:function(e,n){for(var r=n.split("."),i=0,a=r.length;i<a;i++){var o=e[r[i]];(o||t.isPrimitive(o))&&(e=o)}return t.isPrimitive(e)?e:""}},n=function(){function e(){o(this,e),this._listeners={}}return c(e,[{key:"addListener",value:function(e,t){var n=this._listeners;(n[e]||(n[e]=[])).push(t)}},{key:"removeListener",value:function(e,t){var n=this._listeners[e];n&&n.splice(n.indexOf(t),1)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=this._listeners[e];a&&a.forEach(function(e){return e.apply.apply(e,[t].concat(r))})}}]),e}(),u=function(e){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.init(e),t}return a(n,e),c(n,[{key:"init",value:function(e){if(this.$locale=e.locale,this.$messages=e.messages,this.$localeMsgs=e.messages[e.locale],this.$data=e.data,this.$mount=document.querySelector(e.selector)||document.body,this.$name=e.name||"i18n",!this.$localeMsgs)return void this._warn("messages can't find the key '"+e.locale+"'");this.$cached=this.cached(),this.$dep=Object.create(null),this.initObervser(),this.setup()}},{key:"cached",value:function(){var e=this.$name,t=0,n=new Map;return function r(i){for(var a=i.children,o=0,s=a.length;o<s;o++){var c=a[o];c.dataset[e]&&n.set(e+"#"+ ++t,c),c.children.length>0&&r(c)}}(this.$mount),n}},{key:"setup",value:function(){var e=this,t=this.$cached,n=[].concat(r(t.keys())),i=!0,a=!1,o=void 0;try{for(var s,c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value,l=t.get(u);e.renderBase(l)}}catch(e){a=!0,o=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}}},{key:"renderBase",value:function(e){var t=this,n=this.$name;e.dataset[n].split(";").forEach(function(n){var r=t.parse(e,n.trim());n.includes("$t")&&t.render$t(e,r),n.includes("$h")&&t.render$h(e,r),n.includes("$c")&&t.render$c(e,r),n.includes("$m")&&t.render$m(e,r)})}},{key:"addDep",value:function(e,t){var n=this,r="$"+e.replace(/\.|\[|\]/g,"_"),i=this.$dep[r];if(!i||!i.includes(t)){i||(this.$dep[r]=[]),this.$dep[r].push(t);var a=this.$dep[r];this.addListener(r,function(){a.forEach(function(e){n.renderBase(e)})})}}},{key:"initObervser",value:function(){function e(n){if("object"===(void 0===n?"undefined":s(n))){if(r++,Array.isArray(n))for(var a=0,o=n.length;a<o;a++)i[r]=a,t(n,a,n[a],r,i),e(n[a]);else{var c=Object.keys(n),u=!0,l=!1,f=void 0;try{for(var h,y=c[Symbol.iterator]();!(u=(h=y.next()).done);u=!0){var p=h.value;i[r]=p,t(n,p,n[p],r,i),e(n[p])}}catch(e){l=!0,f=e}finally{try{!u&&y.return&&y.return()}finally{if(l)throw f}}}r--}}function t(e,t,r,i,a){var o=a.slice(0,i+1);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){if(r!==e){r=e;var t="$"+o.join("_");n.emit(t)}}})}var n=this,r=-1,i=[];e(this.$data)}},{key:"parse",value:function(e,n){var r=this,i=/\$[t|h|c|m]\(['"](.*?)['"]\,*\s*(.*)\)/g,a=/(\w+)\:\s*([^,}]+)/g,o=/^['"]|['"]$/gm,s="",c=Object.create(null);return n.replace(i,function(n,i,u){s=i,u&&u.replace(a,function(n,i,a){o.test(a)?c[i]=a.replace(o,""):(0===a.indexOf("@")&&(a=a.slice(1)),r.addDep(a,e),c[i]=t.getValueBy(r.$data,a))})}),{base:s,conf:c}}},{key:"insertMsg",value:function(e,t){for(var n=Object.keys(t),r=0,i=n.length;r<i;r++){var a=new RegExp("{"+n[r]+"}","g");e=e.replace(a,t[n[r]])}return e}},{key:"renderMsg",value:function(e){return this.insertMsg(t.getValueBy(this.$localeMsgs,e.base),e.conf)}},{key:"render$t",value:function(e,t){e.innerText=this.renderMsg(t)}},{key:"render$h",value:function(e,t){e.innerHTML=this.renderMsg(t)}},{key:"render$c",value:function(e,n){for(var r=this.$locale,i=Object.keys(this.$messages),a=0,o=i.length;a<o;a++)i[a]!==r&&t.removeClass(e,i[a]+"-"+n.base);t.addClass(e,r+"-"+n.base)}},{key:"render$m",value:function(e,t){var n=this.$locale,r=Object.keys(this.$messages).join("|"),i=new RegExp("(/("+r+"))?/[^/]+(?=\\.[^/]*$)","g"),a=e.getAttribute("src"),o=a.replace(i,"/"+n+"/"+t.base);e.setAttribute("src",o)}},{key:"_log",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,["Ni18n Log: ["].concat(n,["]"]))}},{key:"_warn",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,["Ni18n Warn: ["].concat(n,["]"]))}}]),n}(n);e.Ni18n=u}(window)}]);